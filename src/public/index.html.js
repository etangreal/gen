

// ------------------------------------------------------------------------------------------------
// DECLARATIONS
// ------------------------------------------------------------------------------------------------


var util = window.exports.Util;
var store = window.exports.Storage;

var sock = new Sock();
var rest = new Rest();

// ------------------------------------------------------------------------------------------------
// EVENTS
// ------------------------------------------------------------------------------------------------

var onLoad = function() {

	//Web Socket Support
	var supported = ('WebSocket' in window) ? 'Is supported by your Browser!' : 'Is NOT supported by your Browser!';
	$('#supported').text(supported);

	//Web Sockets
	$('#wsHost').val('ws://' + location.host + '/');
	$('#wsConnect').on('click', onWsConnectClick);
	$('#wsPing').on('click', onWsPingClick);

	//REST Web Services
	$('#httpHost').val('http://' + location.host + '/');
	$('#httpRegister').on('click', onHttpRegisterClick);
	$('#httpGreet').on('click', onHttpGreetClick);
	$('#httpPing').on('click', onHttpPingClick);

	//Status
	$('#clearStatus').on('click', onClearStatusClick);

}//onLoad

// ------------------------------------------------------------------------------------------------
// WebSockets
// ------------------------------------------------------------------------------------------------

var onWsConnectClick = function() {
	sock.connect( $('#wsHost').val() );
}

// ------------------------------------------------------------------------------------------------

var onWsPingClick = function() {
	sock.ping();
}

// ------------------------------------------------------------------------------------------------
// Http
// ------------------------------------------------------------------------------------------------

var onHttpRegisterClick = function() {
	rest.user.register( $('#name').val() );
}

// ------------------------------------------------------------------------------------------------

var onHttpGreetClick = function() {
	rest.user.greet( store.getToken() );
}

// ------------------------------------------------------------------------------------------------

var onHttpPingClick = function() {
	rest.user.ping();
}

// ------------------------------------------------------------------------------------------------
// Status
// ------------------------------------------------------------------------------------------------

var onClearStatusClick = function() {
	$('#status').html('&nbsp;');
}

// ------------------------------------------------------------------------------------------------
// INIT
// ------------------------------------------------------------------------------------------------

initTabs();

window.onload = onLoad;

// ------------------------------------------------------------------------------------------------
// END
// ------------------------------------------------------------------------------------------------